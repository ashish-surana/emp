<!DOCTYPE HTML>
<html>
    <head>
        <title>Enhanced Meeting Planner</title>
    </head>
    <body>
        <strong><a href='http://ayeshamd.com/emp_search.html'>to search page</a></strong>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <strong><a href='http://ayeshamd.com'>to main page</a></strong>

        <H1>Enhanced Meeting Planner POC - Insertion</H1>
        When the form is loaded:
        <ul>
            <li>A random mail is generated and added to the email field</li>
            <li>Current time is inserted into the create and upate date time field</li>
        </ul>
        <strong>You can change the form or accept defaults and store it in elastic search.</strong>
        <br><hr><br>


        <form method="POST" action="" id="searchForm">
            <button onclick="store(this.form)">Store</button>
            <br><br>
            <fieldset>
                <legend>Enhanced Meeting Planner Elastic Search Server Details</legend>
                EMP Host: <input type="text" id="empHost" value="https://search-emp-cixk22lczi5yrt4zd2dhswnltm.us-east-1.es.amazonaws.com" />
                <br>
                EMP Index: <input type="text" id="empIndex" value="emp" />
                <br>
                EMP Type: <input type="text" id="empType" value="rooms" />
            </fieldset>
            <br><hr><br>
            <fieldset>
                <legend>Meeting Place</legend>
                <br>
                email: <input type="text" id="meeting_place.email" value="godzilla@pfizer.com" /><br> 
                name: <input type="text" id="meeting_place.name" value="Big conference room"><br>  
                theme: <input type="text" id="meeting_place.theme" value="professional"><br> 
                capacity: <input type="text" id="meeting_place.capacity" value="25"><br> 
                description: <input type="text" id="meeting_place.description" value="The big room at Pfizer main building"><br>
                create_date: <input type="text" id="meeting_place.create_date" value="20180304"><br> 
                update_date: <input type="text" id="meeting_place.update_date" value="20180304"><br> 
                <br>
            </fieldset>
            <br><hr><br>
            <fieldset>
                <legend>Location, Location, Location</legend>
                <fieldset>
                    <legend>Office Location</legend>
                    office_space: <input type="text" id="location.office_space" value="true" /><br>
                    room_name: <input type="text" id="location.office.room_name" value="godzilla" /><br>
                    floor: <input type="text" id="location.office.floor" value="3" /><br>
                    building: <input type="text" id="location.office.building" value="Pfizer Building 1" /><br>
                </fieldset>
                <fieldset>
                    <legend>Other Location</legend>
                    business_name: <input type="text" id="location.other.business_name" value="" /><br>
                    street_address: <input type="text" id="location.other.street_address" value="" /><br>
                    city: <input type="text" id="location.other.city" value="" /><br>
                    zip_code: <input type="text" id="location.other.zip_code" value="" /><br>
                    state: <input type="text" id="location.other.state" value="" /><br>
                </fieldset>
            </fieldset>
            <br><hr><br>
            <fieldset>
                <legend>Tags - separated by spaces</legend>
                <textarea id="tags" rows="4" cols="50">television projector speakerphone whiteboard 
                </textarea>
            </fieldset>
            <br>
            <button onclick="store(this.form)">Store</button>
        </form>

        <script type="text/javascript" src="emp_insert_helper.js"></script>
        <script>
            var d = getDateTime(new Date());
            document.getElementById("meeting_place.create_date").value = d;
            document.getElementById("meeting_place.update_date").value = d;
            document.getElementById("meeting_place.email").value = getRandomEmail();

            function store(form) {
                var formVals = getFormValues(form);
                var id = document.getElementById("meeting_place.email").value;
                var response = storeInElasticSearch(id, formVals);
            }

            function getFormValues(form) {
                var root = new Object();

                var meeting_place_obj = new Object();
                root.meeting_place = meeting_place_obj;

                var location_obj = new Object();
                var office_location_obj = new Object();
                location_obj.office = office_location_obj;

                var other_location_obj = new Object();
                location_obj.other = other_location_obj;

                root.location = location_obj;

                var tagsObj = new Object();
                root.tags = tagsObj;

                var i = 0;
                var fe = form.elements;
                for (i = 0; i < fe.length; i+=1) {
                    if (fe[i].id == "meeting_place.email") {
                        root.meeting_place.email = fe[i].value;
                    } else if (fe[i].id == "meeting_place.name") {
                        root.meeting_place.name = fe[i].value;
                    } else if (fe[i].id == "meeting_place.theme") {
                        root.meeting_place.theme = fe[i].value;  
                    } else if (fe[i].id == "meeting_place.capacity") {
                        root.meeting_place.capacity = fe[i].value;
                    } else if (fe[i].id == "meeting_place.description") {
                        root.meeting_place.description = fe[i].value;
                    } else if (fe[i].id == "meeting_place.create_date") {
                        root.meeting_place.create_date = fe[i].value;
                    } else if (fe[i].id == "meeting_place.update_date") {
                        root.meeting_place.update_date = fe[i].value; 

                    }  else if (fe[i].id == "location.office_space") {
                        root.location.office_space = fe[i].value; 

                    }  else if (fe[i].id == "location.office.room_name") {
                        root.location.office.room_name = fe[i].value; 
                    }  else if (fe[i].id == "location.office.floor") {
                        root.location.office.floor = fe[i].value; 
                    }  else if (fe[i].id == "location.office.building") {
                        root.location.office.building = fe[i].value; 

                    }  else if (fe[i].id == "location.other.business_name") {
                        root.location.other.business_name = fe[i].value; 
                    }  else if (fe[i].id == "location.other.street_address") {
                        root.location.other.street_address = fe[i].value; 
                    }  else if (fe[i].id == "location.other.city") {
                        root.location.other.city = fe[i].value; 
                    }  else if (fe[i].id == "location.other.zip_code") {
                        root.location.other.zip_code = fe[i].value; 
                    }  else if (fe[i].id == "location.other.state") {
                        root.location.other.state = fe[i].value; 

                    } else if (fe[i].id == "tags") {
                        root.tags = fe[i].value.trim().split(" ");
                    }
                }
                return root;
            }
        </script>
    </body>
</html>